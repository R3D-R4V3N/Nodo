@page "/register"
@layout EmptyLayout

<PageTitle>Register</PageTitle>

<AuthorizeView Context="authContext">
    <Authorized>
        <AuthLayout>
            <div class="space-y-4 rounded-3xl bg-white/70 p-6 text-center shadow-xl backdrop-blur">
                <p class="text-lg font-semibold text-[#04320C]">You're already logged in as @authContext.User.Identity?.Name.</p>
            </div>
        </AuthLayout>
    </Authorized>
    <NotAuthorized>
        <AuthLayout>
            @if (_result?.IsSuccess == true)
            {
                <div class="space-y-4 rounded-3xl bg-white/70 p-6 text-center shadow-xl backdrop-blur">
                    <p class="text-lg font-semibold text-[#04320C]">Je registratie is geslaagd!</p>
                    <p class="text-sm text-zinc-600">Je kan nu inloggen om verder te gaan.</p>
                    <a href="/login" class="inline-flex w-full items-center justify-center rounded-full bg-[#0B6532] py-3 text-lg font-semibold text-white shadow-md transition hover:bg-[#0a572b]">
                        Ga naar login
                    </a>
                </div>
            }
            else if (_isLoadingOrganizations)
            {
                <div class="space-y-4 rounded-3xl bg-white/70 p-6 text-center shadow-xl backdrop-blur">
                    <p class="text-lg font-semibold text-[#04320C]">Even geduld...</p>
                    <p class="text-sm text-zinc-600">We laden de beschikbare organisaties.</p>
                </div>
            }
            else if (!string.IsNullOrEmpty(_organizationLoadError))
            {
                <div class="space-y-4 rounded-3xl bg-white/70 p-6 text-center shadow-xl backdrop-blur">
                    <p class="text-lg font-semibold text-[#04320C]">Registratie tijdelijk niet mogelijk</p>
                    <p class="text-sm text-zinc-600">@_organizationLoadError</p>
                </div>
            }
            else
            {
                <AuthErrorList Errors="_result?.Errors" />
                <RegisterForm Model="Model" Organizations="Organizations" OnSubmit="RegisterUserAsync" />
            }
        </AuthLayout>
    </NotAuthorized>
</AuthorizeView>
