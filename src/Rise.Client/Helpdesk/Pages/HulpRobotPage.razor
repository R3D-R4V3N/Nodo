@page "/helpdesk/hulp-robot"

@attribute [Authorize]
@using Rise.Shared.Chats
@using Rise.Client.Chats.Components
@using Microsoft.JSInterop
@attribute [Authorize]

@layout EmptyLayout
@inject NavigationManager NavigationManager
@inject IJSRuntime JSRuntime

<div class="flex flex-col h-screen max-h-screen overflow-hidden bg-neutral-100 text-neutral-900">

    <ChatHeader 
        DisplayName="Hulp-Robot"
        AvatarUrl="https://images.unsplash.com/photo-1659018966820-de07c94e0d01?q=80"
    />

    <!-- INLINE MESSAGE LIST -->
    <div class="flex-1 overflow-y-auto px-3 py-5 bg-neutral-100 space-y-2 no-scrollbar">

        @foreach (var message in Messages)
        {
            var isOutgoing = message.IsUser;

            <div class="space-y-1">
                <MessageBubble Text="@message.Content"
                               IsOutgoing="isOutgoing"
                               AvatarUrl="@message.AvatarUrl" />
            </div>
        }

    </div>

    <!-- Input -->
    <div class="fixed bottom-0 left-0 right-0 bg-white">
        <div class="mx-auto px-3">
            <SuggestionChips Suggestions="HelpdeskSuggestions" OnPick="HandleSuggestion" />
            <ChatInput OnSend="HandleUserInput" />
        </div>
    </div>

</div>

<style>
  html, body { height: 100%; overflow-x: hidden; }
  .no-scrollbar::-webkit-scrollbar { display: none; }
  .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
</style>