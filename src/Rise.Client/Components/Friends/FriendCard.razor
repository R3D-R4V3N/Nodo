@using Rise.Shared.Assets

<article class="friend-card flex items-center gap-3 bg-white rounded-2xl px-3 py-3 shadow-sm">
    <img src="@(string.IsNullOrWhiteSpace(Friend.AvatarUrl) ? DefaultImages.Profile : Friend.AvatarUrl)" alt="@Friend.Name" class="h-10 w-10 rounded-full ring-2 ring-white/60" />
    <div class="flex-1 min-w-0">
        <p class="text-sm font-medium truncate">@Friend.Name</p>
        <span class="inline-block mt-1 text-[10px] px-2 py-0.5 rounded-md bg-[#e7f5ec] text-[#127646] border border-[#cfead9]">
            @Friend.Age jaar
        </span>
    </div>

    <div class="flex space-x-2">
        @if (Friend.State == UserConnectionTypeDto.IncomingFriendRequest)
        {
            <button class="h-12 w-12 grid place-items-center rounded-xl bg-[#D64541] hover:bg-[#c53e3a]" aria-label="Verwijderen"
                    @onclick="(() => OnReject.InvokeAsync(Friend))">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="#ffffff" viewBox="0 0 256 256"><path d="M216,48H176V40a24,24,0,0,0-24-24H104A24,24,0,0,0,80,40v8H40a8,8,0,0,0,0,16h8V208a16,16,0,0,0,16,16H192a16,16,0,0,0,16-16V64h8a8,8,0,0,0,0-16ZM96,40a8,8,0,0,1,8-8h48a8,8,0,0,1,8,8v8H96Zm96,168H64V64H192ZM112,104v64a8,8,0,0,1-16,0V104a8,8,0,0,1,16,0Zm48,0v64a8,8,0,0,1-16,0V104a8,8,0,0,1,16,0Z"></path></svg>
            </button>
            <button class="h-12 w-12 grid place-items-center rounded-xl bg-[#127646] hover:bg-[#0f613a]" aria-label="Accepteren"
                    @onclick="(() => OnAccept.InvokeAsync(Friend))">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="#ffffff" viewBox="0 0 256 256"><path d="M229.66,77.66l-128,128a8,8,0,0,1-11.32,0l-56-56a8,8,0,0,1,11.32-11.32L96,188.69,218.34,66.34a8,8,0,0,1,11.32,11.32Z"></path></svg>
            </button>
        }
        else if (Friend.State == UserConnectionTypeDto.OutgoingFriendRequest)
        {
            <button class="h-12 w-12 grid place-items-center rounded-xl bg-[#D64541] hover:bg-[#c53e3a]" aria-label="Verwijderen"
                    @onclick="(() => OnCancel.InvokeAsync(Friend))">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="#ffffff" viewBox="0 0 256 256"><path d="M216,48H176V40a24,24,0,0,0-24-24H104A24,24,0,0,0,80,40v8H40a8,8,0,0,0,0,16h8V208a16,16,0,0,0,16,16H192a16,16,0,0,0,16-16V64h8a8,8,0,0,0,0-16ZM96,40a8,8,0,0,1,8-8h48a8,8,0,0,1,8,8v8H96Zm96,168H64V64H192ZM112,104v64a8,8,0,0,1-16,0V104a8,8,0,0,1,16,0Zm48,0v64a8,8,0,0,1-16,0V104a8,8,0,0,1,16,0Z"></path></svg>
            </button>
        }
        else if (Friend.State == UserConnectionTypeDto.AddFriends)
        {
            <button class="h-12 w-12 grid place-items-center rounded-xl bg-[#127646] hover:bg-[#0f613a]" aria-label="Toevoegen"
                    @onclick="(() => OnAdd.InvokeAsync(Friend))">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="#ffffff" viewBox="0 0 256 256"><path d="M224,128a8,8,0,0,1-8,8H136v80a8,8,0,0,1-16,0V136H40a8,8,0,0,1,0-16h80V40a8,8,0,0,1,16,0v80h80A8,8,0,0,1,224,128Z"></path></svg>
            </button>
        }
        else
        {
            <button class="h-12 w-12 grid place-items-center rounded-xl bg-[#127646] hover:bg-[#0f613a]" aria-label="Open chat"
                    @onclick="(() => OnOpenChat.InvokeAsync(Friend))">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="#ffffff" viewBox="0 0 256 256"><path d="M216,48H40A16,16,0,0,0,24,64V224a15.85,15.85,0,0,0,9.24,14.5A16.13,16.13,0,0,0,40,240a15.89,15.89,0,0,0,10.25-3.78l.09-.07L83,208H216a16,16,0,0,0,16-16V64A16,16,0,0,0,216,48ZM40,224h0ZM216,192H80a8,8,0,0,0-5.23,1.95L40,224V64H216ZM88,112a8,8,0,0,1,8-8h64a8,8,0,0,1,0,16H96A8,8,0,0,1,88,112Zm0,32a8,8,0,0,1,8-8h64a8,8,0,1,1,0,16H96A8,8,0,0,1,88,144Z"></path></svg>
            </button>
            <button class="h-12 w-12 grid place-items-center rounded-xl bg-[#D64541] hover:bg-[#c53e3a]" aria-label="Verwijderen"
                    @onclick="(() => OnRemove.InvokeAsync(Friend))">
                <svg xmlns="http://www.w3.org/2000/svg"  class="h-6 w-6" fill="#ffffff" viewBox="0 0 256 256"><path d="M216,48H176V40a24,24,0,0,0-24-24H104A24,24,0,0,0,80,40v8H40a8,8,0,0,0,0,16h8V208a16,16,0,0,0,16,16H192a16,16,0,0,0,16-16V64h8a8,8,0,0,0,0-16ZM96,40a8,8,0,0,1,8-8h48a8,8,0,0,1,8,8v8H96Zm96,168H64V64H192ZM112,104v64a8,8,0,0,1-16,0V104a8,8,0,0,1,16,0Zm48,0v64a8,8,0,0,1-16,0V104a8,8,0,0,1,16,0Z"></path></svg>
            </button>
        }
    </div>
</article>

@code {
    [Parameter] public UserConnectionDTO Friend { get; set; } = default!;
    [Parameter] public EventCallback<UserConnectionDTO> OnAccept { get; set; }
    [Parameter] public EventCallback<UserConnectionDTO> OnReject { get; set; }
    [Parameter] public EventCallback<UserConnectionDTO> OnCancel { get; set; }
    [Parameter] public EventCallback<UserConnectionDTO> OnAdd { get; set; }
    [Parameter] public EventCallback<UserConnectionDTO> OnOpenChat { get; set; }
    [Parameter] public EventCallback<UserConnectionDTO> OnRemove { get; set; }
}
