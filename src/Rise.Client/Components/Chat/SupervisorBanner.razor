@code {
    [Parameter] public EventCallback OnSupervisorEnabled { get; set; }  // ✅ nieuw

    private enum BannerState { Request, Active, Hidden }
    private BannerState _state = BannerState.Request;

    private async Task ConfirmSupervisor()   // ✅ async gemaakt
    {
        _state = BannerState.Active;
        if (OnSupervisorEnabled.HasDelegate)
            await OnSupervisorEnabled.InvokeAsync();   // ✅ parent verwittigen
    }

    private void DismissBanner() => _state = BannerState.Hidden;
    private void CloseBanner() => _state = BannerState.Hidden;
    private void CollapseActive() => _state = BannerState.Hidden;

    private string GetWrapperClasses()
    {
        var hidden = _state == BannerState.Hidden ? "-translate-y-full opacity-0 pointer-events-none" : "translate-y-0";
        return $"fixed inset-x-0 top-0 z-50 transition-all duration-300 ease-out {hidden}";
    }
}
<div id="supervisor-banner" class="@GetWrapperClasses()" role="region" aria-label="Melding toezicht">

    @if (_state == BannerState.Request)
    {
        <div class="mx-2 mt-2 sm:mx-auto sm:max-w-2xl rounded-xl border border-red-400/40 bg-red-50 text-red-900 shadow-lg
                    dark:bg-red-900/20 dark:text-red-100 backdrop-blur supports-[backdrop-filter]:bg-red-50/80">

            <div class="flex items-start gap-3 p-4">
                <!-- Icon -->
                <div class="shrink-0">
                    <svg class="h-6 w-6" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                        <path d="M12 9v4m0 4h.01M10.29 3.86 1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0Z"
                              stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </div>

                <!-- Text -->
                <div class="min-w-0 flex-1">
                    <p class="text-base font-semibold leading-6">Toezicht inschakelen</p>
                    <p class="mt-1 text-sm leading-5">
                        Als je doorgaat, kan een supervisor deze chat meelezen om te helpen.
                        Beide gesprekspartners krijgen deze melding.
                    </p>

                    <!-- Actions -->
                    <div class="mt-3 flex flex-col gap-2 xs:flex-row">
                        <button @onclick="ConfirmSupervisor"
                                class="inline-flex items-center justify-center rounded-lg px-3 py-2 text-sm font-medium
                                       bg-red-600 text-white hover:bg-red-700 active:bg-red-800 focus:outline-none
                                       focus-visible:ring-2 focus-visible:ring-red-600/60">
                            Supervisor inschakelen
                        </button>
                        <button @onclick="DismissBanner"
                                class="inline-flex items-center justify-center rounded-lg px-3 py-2 text-sm font-medium
                                       border border-red-500/40 text-red-900/80 hover:bg-red-100
                                       dark:text-red-50/90 dark:hover:bg-red-900/30">
                            Later
                        </button>
                    </div>
                </div>

                <!-- Close -->
                <button @onclick="CloseBanner"
                        class="ml-2 shrink-0 rounded-md p-1.5 text-red-900/70 hover:bg-red-100 hover:text-red-900
                               dark:text-red-100/70 dark:hover:bg-red-900/30"
                        aria-label="Melding sluiten">
                    <svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                        <path fill-rule="evenodd"
                              d="M4.293 4.293a1 1 0 0 1 1.414 0L10 8.586l4.293-4.293a1 1 0 1 1 1.414 1.414L11.414 10l4.293 4.293a1 1 0 0 1-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 0 1-1.414-1.414L8.586 10 4.293 5.707a1 1 0 0 1 0-1.414z"
                              clip-rule="evenodd" />
                    </svg>
                </button>
            </div>
        </div>
    }

    @if (_state == BannerState.Active)
    {
        <div class="mx-2 mt-2 sm:mx-auto sm:max-w-2xl">
            <div class="rounded-xl border border-red-400/40 bg-red-50 text-red-900 shadow-lg
                        dark:bg-red-900/20 dark:text-red-100 backdrop-blur supports-[backdrop-filter]:bg-red-50/80">
                <div class="flex items-start gap-3 p-4">
                    <svg class="h-6 w-6 shrink-0" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                        <path d="M12 5c-7 0-10 7-10 7s3 7 10 7 10-7 10-7-3-7-10-7Zm0 11a4 4 0 1 1 0-8 4 4 0 0 1 0 8Z"
                              stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    <div class="min-w-0 flex-1">
                        <p class="text-base font-semibold leading-6">Supervisor kijkt mee</p>
                        <p class="mt-1 text-sm leading-5">
                            Deze chat staat onder toezicht voor ondersteuning en kwaliteitsbewaking.
                        </p>
                    </div>
                    <button @onclick="CollapseActive"
                            class="rounded-md p-1.5 text-red-900/70 hover:bg-red-100 hover:text-red-900
                                   dark:text-red-100/70 dark:hover:bg-red-900/30"
                            aria-label="Melding inklappen">
                        <svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path d="M5 8l5 5 5-5H5z"/></svg>
                    </button>
                </div>
            </div>
        </div>
    }
</div>

<!-- Spacer zodat de banner je chat niet overlapt -->
<div class="h-16 sm:h-14"></div>
