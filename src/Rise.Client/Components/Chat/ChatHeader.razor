@* Header met terugknop, avatar, titel en alarmknop *@
<div class="relative flex items-center gap-3 bg-[#127646] rounded-b-3xl text-white px-4 pb-4 pt-8">
    <button class="p-2 -ml-2 rounded-full hover:bg-white/10" aria-label="Terug" @onclick="OnBack">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
        </svg>
    </button>

    <img src="@AvatarUrl" alt="@DisplayName" class="h-9 w-9 rounded-full ring-2 ring-white/30" />

    <div class="flex-1 min-w-0">
        <h1 class="text-base font-semibold leading-5 truncate">@DisplayName</h1>
        <p class="text-xs text-white/80">@StatusText</p>
    </div>

    <button type="button" class="@GetAlertButtonClasses()" @onclick="OnAlert" disabled="@IsEmergencyBusy">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="#ffffff" viewBox="0 0 256 256">
            <path d="M224,71.1a8,8,0,0,1-10.78-3.42,94.13,94.13,0,0,0-33.46-36.91,8,8,0,1,1,8.54-13.54,111.46,111.46,0,0,1,39.12,43.09A8,8,0,0,1,224,71.1ZM35.71,72a8,8,0,0,0,7.1-4.32A94.13,94.13,0,0,1,76.27,30.77a8,8,0,1,0-8.54-13.54A111.46,111.46,0,0,0,28.61,60.32,8,8,0,0,0,35.71,72Zm186.1,103.94A16,16,0,0,1,208,200H167.2a40,40,0,0,1-78.4,0H48a16,16,0,0,1-13.79-24.06C43.22,160.39,48,138.28,48,112a80,80,0,0,1,160,0C208,138.27,212.78,160.38,221.81,175.94ZM150.62,200H105.38a24,24,0,0,0,45.24,0ZM208,184c-10.64-18.27-16-42.49-16-72a64,64,0,0,0-128,0c0,29.52-5.38,53.74-16,72Z"></path>
        </svg>
        <span class="sr-only">Alarm</span>
    </button>
</div>

@code {
    [Parameter] public string DisplayName { get; set; } = "Helena";
    [Parameter] public string AvatarUrl { get; set; } = "https://i.pravatar.cc/64?img=12";
    [Parameter] public string StatusText { get; set; } = "Online 11 minuten geleden";
    [Parameter] public bool IsEmergencyActive { get; set; }
    [Parameter] public bool IsEmergencyBusy { get; set; }
    [Parameter] public EventCallback OnBack { get; set; }
    [Parameter] public EventCallback OnAlert { get; set; }

    private string GetAlertButtonClasses()
    {
        var baseClasses = "grid place-items-center h-12 w-12 rounded-xl text-white transition focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-[#127646] focus:ring-red-300";

        if (IsEmergencyBusy)
        {
            baseClasses += " opacity-60 cursor-not-allowed";
        }

        return IsEmergencyActive
            ? $"{baseClasses} bg-[#7f1d1d] border border-red-300 shadow-[0_0_12px_rgba(248,113,113,0.6)]"
            : $"{baseClasses} bg-[#D64541] hover:bg-[#d12e2a]";
    }
}
