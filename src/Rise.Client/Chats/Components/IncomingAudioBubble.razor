@* Inkomende audiobubbel *@
<div class="flex items-end gap-2">
    @if (!string.IsNullOrWhiteSpace(AvatarUrl))
    {
        <img src="@AvatarUrl" alt="" class="h-7 w-7 rounded-full object-cover border border-neutral-200 shrink-0 cursor-pointer" />
    }
    else
    {
        <span class="inline-block h-7 w-7"></span>
    }

    <div class="bg-white rounded-2xl rounded-tl-none px-4 py-3 shadow-sm text-sm max-w-[80%]">
        <div class="flex flex-col gap-2">
            <audio class="w-52 max-w-full" controls src="@AudioDataUrl" preload="metadata"></audio>

            @if (DurationLabel is not null)
            {
                <span class="text-[10px] uppercase tracking-wide text-neutral-500">@DurationLabel</span>
            }

            @if (!string.IsNullOrWhiteSpace(Text))
            {
                <p class="text-sm">@Text</p>
            }
        </div>
    </div>
</div>

@code {
    [Parameter] public string AudioDataUrl { get; set; } = string.Empty;
    [Parameter] public TimeSpan? AudioDuration { get; set; }
    [Parameter] public string? Text { get; set; }
    [Parameter] public string? AvatarUrl { get; set; }

    private string? DurationLabel => AudioDuration is { TotalSeconds: > 0 } duration
        ? duration.ToString(@"m\:ss")
        : null;
}
