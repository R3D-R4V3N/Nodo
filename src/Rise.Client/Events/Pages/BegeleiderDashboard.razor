@page "/evenementenBegeleider"
@using Rise.Client.Dashboard.Components
@using Rise.Client.Events.Components
@using Rise.Shared.Identity
@attribute [Authorize(Roles = $"{AppRoles.Supervisor},{AppRoles.Administrator}")]

@layout EmptyLayout

<div class="flex min-h-screen">
    <Sidebar></Sidebar>

    <main class="flex-1 p-6 space-y-6 bg-neutral-100 m-3 rounded-2xl">
        <DashboardHeader Title="Evenementen"></DashboardHeader>

        <!-- Add Event Button -->
        <div class="flex justify-end mb-4">
            <button @onclick="OpenAddModal"
                    class="bg-[#127646] text-white px-6 py-3 rounded-lg font-semibold hover:bg-[#0d5a36] transition-colors flex items-center gap-2">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 256 256">
                    <path d="M224,128a8,8,0,0,1-8,8H136v80a8,8,0,0,1-16,0V136H40a8,8,0,0,1,0-16h80V40a8,8,0,0,1,16,0v80h80A8,8,0,0,1,224,128Z"></path>
                </svg>
                Nieuw Evenement
            </button>
        </div>

        @if (_errorMessage != null)
        {
            <div class="p-4 bg-red-50 border border-red-200 rounded-lg text-red-700">
                @_errorMessage
            </div>
        }

        @if (_events == null)
        {
            <p class="text-center text-neutral-500 mt-6">Evenementen laden...</p>
        }
        else if (!_events.Any())
        {
            <div class="bg-white rounded-xl p-8 text-center">
                <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" fill="#9ca3af" viewBox="0 0 256 256" class="mx-auto mb-4">
                    <path d="M208,32H184V24a8,8,0,0,0-16,0v8H88V24a8,8,0,0,0-16,0v8H48A16,16,0,0,0,32,48V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V48A16,16,0,0,0,208,32ZM72,48v8a8,8,0,0,0,16,0V48h80v8a8,8,0,0,0,16,0V48h24V80H48V48ZM208,208H48V96H208V208Zm-96-88v64a8,8,0,0,1-16,0V120a8,8,0,0,1,16,0Zm48,0v64a8,8,0,0,1-16,0V120a8,8,0,0,1,16,0Z"></path>
                </svg>
                <p class="text-xl font-semibold text-neutral-700 mb-2">Geen evenementen gevonden</p>
                <p class="text-neutral-500">Klik op "Nieuw Evenement" om je eerste evenement toe te voegen.</p>
            </div>
        }
        else
        {
            <div class="grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6">
                @foreach (var evt in _events)
                {
                    <EventCardBegeleider EventId="@evt.Id"
                                          Title="@evt.Name"
                                          Date="@evt.Date"
                                          Location="@evt.Location"
                                          ImageUrl="@evt.ImageUrl"
                                          Price="@evt.Price"
                                          InterestedUsers="evt.InterestedUsers"
                                          Description="@evt.Description"
                                          OnDelete="@HandleEventDeleted" />
                                          
                }
            </div>
        }
    </main>
</div>

<AddEventModal IsOpen="@_showAddModal"
               NewEvent="@_newEvent"
               ErrorMessage="@_addEventError"
               IsSaving="@_isSaving"
               OnClose="@CloseModal"
               OnSubmit="@HandleAddEvent" />
